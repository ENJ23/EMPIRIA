<div class="my-tickets-container">
    <div class="page-header">
        <h2>Mis <span class="text-gradient">Entradas</span></h2>
        <p class="subtitle">Gestiona tus accesos para los próximos eventos</p>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
        <div class="spinner"></div>
        <p>Cargando tus entradas...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-state">
        <span class="material-icons error-icon">error_outline</span>
        <p>{{ error }}</p>
        <button (click)="loadMyTickets()" class="btn btn-outline">Reintentar</button>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && !error && tickets.length === 0" class="empty-state">
        <span class="material-icons empty-icon">confirmation_number</span>
        <h3>No tienes entradas aún</h3>
        <p>Explora nuestros eventos y asegura tu lugar.</p>
        <a routerLink="/events" class="btn btn-primary">Ver Eventos</a>
    </div>

    <!-- Tickets List -->
    <div *ngIf="!loading && tickets.length > 0" class="tickets-list">
        <div *ngFor="let ticket of tickets" class="ticket-row" [class.used]="ticket.isUsed"
            [class.expired]="ticket.status === 'expired'">

            <!-- Date Column -->
            <div class="ticket-date-col">
                <div class="date-box">
                    <span class="day">{{ ticket.event?.date | date:'dd' }}</span>
                    <span class="month">{{ ticket.event?.date | date:'MMM' }}</span>
                </div>
            </div>

            <!-- Main Info Column -->
            <div class="ticket-info-col">
                <h3 class="event-title">{{ ticket.event?.title }}</h3>
                <div class="ticket-meta">
                    <span class="meta-item">
                        <span class="material-icons">place</span>
                        {{ ticket.event?.location || 'Ver detalles' }}
                    </span>
                    <span class="meta-item">
                        <span class="material-icons">schedule</span>
                        {{ ticket.event?.date | date:'shortTime' }} HRS
                    </span>
                </div>
            </div>

            <!-- Status Column -->
            <div class="ticket-status-col">
                <span class="status-pill" [ngClass]="getStatusClass(ticket.status)">
                    {{ getStatusLabel(ticket.status) }}
                </span>
                <span class="price-tag">{{ ticket.amount ? '$' + ticket.amount : 'Genera tu QR' }}</span>
            </div>

            <!-- Action Column -->
            <div class="ticket-action-col">
                <button *ngIf="ticket.entryQr" (click)="viewQR(ticket)" class="btn-icon-label">
                    <span class="material-icons">qr_code_2</span>
                    <span class="label-text">Ver QR</span>
                </button>
                <div *ngIf="!ticket.entryQr" class="pending-text">
                    {{ getQrUnavailableMessage(ticket.status) }}
                </div>
            </div>
        </div>
    </div>
</div>