<div class="ticket-page" *ngIf="!loading && ticket">
    <!-- Success Message -->
    <div class="success-banner">
        <div class="success-content">
            <span class="checkmark">‚úì</span>
            <h1>¬°Entrada Confirmada!</h1>
            <p>Tu entrada ha sido procesada exitosamente</p>
        </div>
    </div>

    <div class="ticket-wrapper">
        <!-- Ticket Card -->
        <div class="ticket-container">
            <!-- Left Section: Event Details -->
            <div class="ticket-left">
                <div class="event-banner" [style.background-image]="'url(' + ticket.event.imageUrl + ')'">
                    <div class="event-overlay"></div>
                    <div class="event-title-section">
                        <h2>{{ ticket.event.title }}</h2>
                    </div>
                </div>

                <div class="event-details">
                    <div class="detail-row">
                        <span class="icon">üìÖ</span>
                        <div>
                            <p class="label">Fecha y Hora</p>
                            <p class="value">{{ ticket.event.date | date:'dd/MM/yyyy' }}</p>
                        </div>
                    </div>

                    <div class="detail-row">
                        <span class="icon">üìç</span>
                        <div>
                            <p class="label">Ubicaci√≥n</p>
                            <p class="value">{{ ticket.event.location }}</p>
                        </div>
                    </div>

                    <div class="divider"></div>

                    <div class="detail-row">
                        <span class="icon">üë§</span>
                        <div>
                            <p class="label">Asistente</p>
                            <p class="value">{{ ticket.user.name }}</p>
                        </div>
                    </div>

                    <div class="detail-row">
                        <span class="icon">‚úâÔ∏è</span>
                        <div>
                            <p class="label">Correo Confirmado</p>
                            <p class="value email">{{ ticket.user.email }}</p>
                        </div>
                    </div>

                    <!-- Ticket Number -->
                    <div class="ticket-number-section">
                        <p class="label-small">N√∫mero de Entrada</p>
                        <p class="ticket-number">{{ (ticket._id | uppercase).slice(0, 8) }}</p>
                    </div>
                </div>
            </div>

            <!-- Right Section: QR Code -->
            <div class="ticket-right">
                <div class="qr-container">
                    <img [src]="qrCodeDataUrl" alt="C√≥digo QR de Entrada" class="ticket-qr" />
                    <p class="qr-label">Presenta este c√≥digo en la entrada</p>
                </div>

                <!-- Price Badge -->
                <div class="price-section">
                    <p class="price-label">Monto Pagado</p>
                    <p class="price-amount">${{ ticket.amount }}</p>
                </div>

                <!-- Status Badge -->
                <div class="status-badge approved">
                    <span>‚úì V√ÅLIDA</span>
                </div>
            </div>
        </div>

        <!-- Perforated Divider (Visual element) -->
        <div class="divider-tear"></div>

        <!-- Actions Footer -->
        <div class="ticket-footer no-print">
            <button class="btn-print" (click)="printTicket()">
                <i class="material-icons">print</i>
                Imprimir / Guardar PDF
            </button>
            <button class="btn-download" (click)="downloadQR()">
                <i class="material-icons">download</i>
                Descargar C√≥digo QR
            </button>
            <button class="btn-home" routerLink="/">
                <i class="material-icons">home</i>
                Volver al Inicio
            </button>
        </div>

        <!-- Info Message -->
        <div class="info-message no-print">
            <p><strong>‚ö° Consejos:</strong> Guarda tu entrada en tu tel√©fono o imrime una copia. Presenta tu c√≥digo QR en la entrada del evento.</p>
        </div>
    </div>
</div>

<div class="loading-container" *ngIf="loading">
    <div class="spinner"></div>
    <p>Cargando tu entrada...</p>
</div>